{% extends "base.html" %}

{% block title %}{{ title or 'Create Post' }} - Blogify{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
  <div class="bg-white rounded-2xl shadow-sm border border-accent p-8">
    <div class="mb-8">
      <h2 class="font-serif text-3xl font-bold text-dark mb-2">{{ title or 'Create New Post' }}</h2>
      <p class="text-secondary">Share your thoughts with the community</p>
    </div>

    <form method="POST" class="space-y-6">
      <div>
        <label for="title" class="block text-sm font-medium text-dark mb-2">Post Title</label>
        <input type="text" name="title" id="title" value="{{ post.title if post else '' }}" required
               class="w-full px-4 py-3 border border-accent rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200"
               placeholder="Enter a captivating title...">
      </div>

      <div>
        <label for="tags" class="block text-sm font-medium text-dark mb-2">Tags</label>
        <input type="text" name="tags" id="tags" value="{{ post.tags if post else '' }}"
               class="w-full px-4 py-3 border border-accent rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200"
               placeholder="technology, lifestyle, travel (comma-separated)">
      </div>

      <div>
        <label for="editor" class="block text-sm font-medium text-dark mb-2">Content</label>
        <div id="editor" class="bg-white border border-accent rounded-lg" style="min-height: 300px;">{{ post.content | safe if post else '' }}</div>
        <input type="hidden" name="content" id="content">
      </div>

      <div class="flex items-center space-x-2 p-4 bg-accent bg-opacity-30 rounded-lg">
        <input type="checkbox" name="isPublished" id="isPublished" {% if post and post.is_published %}checked{% endif %}
               class="w-4 h-4 text-primary border-accent rounded focus:ring-2 focus:ring-primary">
        <label for="isPublished" class="text-sm font-medium text-dark cursor-pointer">Publish immediately</label>
      </div>

      <div class="flex gap-3 pt-4">
        <button type="submit" class="flex-1 px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-opacity-90 transition-all duration-200 shadow-sm">
          Save Post
        </button>
        <a href="{{ url_for('publisher.dashboard') }}" class="px-6 py-3 bg-white border border-accent text-secondary rounded-lg font-medium hover:bg-accent transition-all duration-200">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>


  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

  <script>
    const quill = new Quill('#editor', {
      theme: 'snow'
    });

    document.querySelector('form').addEventListener('submit', function () {
      document.getElementById('content').value = quill.root.innerHTML;
    });
  </script>
{% endblock %}
